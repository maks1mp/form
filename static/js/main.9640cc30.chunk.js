(this["webpackJsonpdynamic-form"]=this["webpackJsonpdynamic-form"]||[]).push([[0],{302:function(e,t,n){"use strict";n.r(t);var c,r,a=n(0),i=n.n(a),s=n(24),u=n.n(s),l=n(12),o=n(8),j=n(13),d=n.n(j),b=n(19);!function(e){e.product="product",e.serialNumber="serialNumber",e.date="date",e.file="file",e.textInput="textInput",e.email="email",e.country="country",e.state="state",e.phone="phone",e.dropdown="dropdown",e.checkboxes="checkboxes"}(c||(c={})),function(e){e.product="product",e.customer="customer"}(r||(r={}));var O=n(94),f=n(10),p=n(131),h=n.n(p),m=n(15),v=n(3),x=function(e){var t=e.name,n=e.id,c=e.values;return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:"Picked"}),Object(v.jsxs)(m.b,{as:"select",name:t,id:n,children:[Object(v.jsx)("option",{}),c.map((function(e){return Object(v.jsx)("option",{value:e.value,label:e.label,children:e.label},e.id)}))]})]})},y=function(e){var t=e.name,n=e.values,c=e.id;return Object(v.jsxs)("div",{id:c,children:[Object(v.jsx)("div",{children:"Picked"}),Object(v.jsx)("div",{role:"group",children:n.map((function(e){return Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:e.label}),Object(v.jsx)(m.b,{type:"radio",id:e.id,name:t,value:e.value})]},e.id)}))})]})},g=n(134),w=function(e){var t=e.form,n=e.field,c=e.promiseOptions,r=e.disabled;return Object(v.jsx)(g.a,{cacheOptions:!0,defaultOptions:!0,name:n.name,defaultValue:n.value,onChange:function(e){return t.setFieldValue(n.name,e.value)},isDisabled:Boolean(r),loadOptions:c})},k=function(e){var t=e.id,n=e.label,c=e.field,r=e.form,i=Object(a.useState)(""),s=Object(o.a)(i,2),u=s[0],l=s[1],j=Object(a.useState)(""),O=Object(o.a)(j,2),f=O[0],p=O[1],h=Object(a.useState)(!1),m=Object(o.a)(h,2),x=m[0],y=m[1],g=Object(a.useState)(!1),w=Object(o.a)(g,2),k=w[0],S=w[1],C=Object(a.useCallback)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){console.log("Fake api call..."),setTimeout((function(){Math.random()<.5?e({valid:!0}):e({valid:!1})}),2e3)})));case 1:case"end":return e.stop()}}),e)}))),[]),F=Object(a.useCallback)(Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(u),l(""),S(!0),e.next=5,C();case 5:t=e.sent,n=t.valid,r.setFieldValue(c.name,n?u:""),y(n),S(!1);case 10:case"end":return e.stop()}}),e)}))),[u,c.name,r,C]);return Object(v.jsxs)("div",{children:[f&&Object(v.jsxs)("div",{children:[Object(v.jsx)("b",{children:f})," ",Object(v.jsx)("span",{children:k?"Checking...":x?"OK":"FAILURE"})," ",Object(v.jsx)("button",{onClick:function(){p(""),r.setFieldValue(c.name,"")},children:"Clear"})]}),Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:n}),Object(v.jsx)("input",{disabled:Boolean(f),type:"text",onBlur:F,onChange:function(e){return l(e.target.value)},value:u,id:t})]})]})},S=n(52),C=n(54);function F(e){return e.reduce((function(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(S.a)({},t.name,t.default||""))}),{})}function D(e){var t=e.reduce((function(e,t){var n=C.a((function(e){return t.required?C.d().required("".concat(t.label," is a required field")):C.b()}));return Object(f.a)(Object(f.a)({},e),{},Object(S.a)({},t.name,n))}),{});return C.c().shape(t)}n(255);var B=n(130),V=function(e){var t=e.country,n=e.field,c=e.form,r=e.disabled,i=Object(a.useState)([]),s=Object(o.a)(i,2),u=s[0],l=s[1];function j(){return(j=Object(b.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("states.json",{cache:"force-cache"});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,t&&t in c&&l(Object.entries(c[t]).map((function(e){var t=Object(o.a)(e,2);return{value:t[0],label:t[1]}}))),e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(e){j.apply(this,arguments)}(t)}),[t]),Object(v.jsx)(B.a,{options:u,name:n.name,defaultValue:n.value,onChange:function(e){return c.setFieldValue(n.name,e.value)},isDisabled:Boolean(r)})},A=function(e){var t=e.fields,n=e.handleSubmit,r=e.children,a=function(e){return Object(v.jsxs)(v.Fragment,{children:[e.description&&Object(v.jsx)("div",{children:e.description}),Object(v.jsx)(m.a,{name:e.name})]})};return Object(v.jsx)(m.d,{initialValues:F(t),validationSchema:D(t),onSubmit:function(e){n(e)},children:function(e){return Object(v.jsxs)(m.c,{style:{marginBottom:30,marginTop:30},onSubmit:e.handleSubmit,children:[Object(v.jsx)(v.Fragment,{children:t.map((function(t){var n=[t.id,t.name,t.label].join("");switch(t.type){case c.textInput:case c.phone:case c.email:return Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:t.label}),Object(v.jsx)(m.b,{name:t.name}),a(t)]},n);case c.serialNumber:return Object(v.jsxs)("div",{children:[Object(v.jsx)(m.b,Object(f.a)({component:k},t)),a(t)]},n);case c.file:return Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{children:t.label}),Object(v.jsx)("div",{children:Object(v.jsx)("input",{accept:t.accept,type:t.type,name:t.name,onChange:function(n){var c,r;e.setFieldValue(t.name,null===n||void 0===n||null===(c=n.target)||void 0===c||null===(r=c.files)||void 0===r?void 0:r[0])}})}),a(t)]},n);case c.checkboxes:var r=t.options,i=Object(O.a)(t,["options"]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(y,Object(f.a)(Object(f.a)({},i),{},{values:r})),a(t)]},n);case c.dropdown:var s=t.options,u=Object(O.a)(t,["options"]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(x,Object(f.a)(Object(f.a)({},u),{},{values:s})),a(t)]},n);case c.date:var l=e.values[t.name];return Object(v.jsxs)("div",{children:[Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:t.label}),Object(v.jsx)(h.a,{selected:l?new Date(l):null,dateFormat:"MMMM d, yyyy",className:"form-control",name:"startDate",onChange:function(n){n&&e.setFieldValue(t.name,n.toString())}})]}),a(t)]},n);case c.product:return Object(v.jsxs)("div",{children:[Object(v.jsx)(m.b,Object(f.a)(Object(f.a)({},t),{},{component:w,promiseOptions:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("search.json?q=".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c.map((function(e){return{value:e.id,label:e.title}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),a(t)]},n);case c.country:return Object(v.jsxs)("div",{children:[Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:t.label}),Object(v.jsx)(m.b,Object(f.a)(Object(f.a)({},t),{},{component:w,promiseOptions:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("countries.json",{cache:"force-cache"});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",Object.entries(c).filter((function(e){var n=Object(o.a)(e,2);n[0];return n[1].toLowerCase().includes(t.toLowerCase())})).map((function(e){var t=Object(o.a)(e,2);return{value:t[0],label:t[1]}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))]}),a(t)]},n);case c.state:var j,p,g=null!==(j=null===(p=e.values)||void 0===p?void 0:p.country)&&void 0!==j?j:"";return Object(v.jsxs)("div",{children:[Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:t.label}),Object(v.jsx)(m.b,Object(f.a)(Object(f.a)({},t),{},{country:g,render:function(e){return Object(v.jsx)(V,Object(f.a)({country:g},e))},disabled:!Boolean(g)}))]}),a(t)]},n);default:return Object(v.jsxs)("div",{children:["Not implemented field ",t.type]},n)}}))}),r]})}})},E=function(){var e,t,n,c=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),i=Object(o.a)(r,2),s=i[0],u=i[1],l=Object(a.useState)(!1),j=Object(o.a)(l,2),O=j[0],f=j[1],p=Object(a.useCallback)(Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,fetch("form.json");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,c(n),u(null),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),c(null),u(e.t0);case 16:return e.prev=16,f(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])}))),[]);return Object(a.useEffect)((function(){p()}),[p]),{formData:n,error:s,loading:O}}(),i=c.formData,s=c.loading,u=c.error,j=Object(a.useState)(),O=Object(o.a)(j,2),f=O[0],p=O[1],h=Object(a.useState)(!1),m=Object(o.a)(h,2),x=m[0],y=m[1];return s?Object(v.jsx)("div",{children:"Loading..."}):u?Object(v.jsx)("div",{children:"Error..."}):i?Object(v.jsxs)(v.Fragment,{children:[f&&Array.isArray(f)&&Object(v.jsxs)("table",{style:{border:"solid",borderCollapse:"collapse",marginBottom:20},width:"100%",children:[Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:null===(e=i.find((function(e){return e.name===r.product})))||void 0===e?void 0:e.fields.map((function(e){return Object(v.jsx)("th",{style:{border:"solid"},children:e.label},e.id)}))})}),Object(v.jsx)("tbody",{children:f.map((function(e,t){return Object(v.jsx)("tr",{children:Object.values(e).map((function(e,t){return Object(v.jsx)("td",{style:{border:"solid"},children:"object"===typeof e?e.name:e},t)}))},t)}))})]}),Object(v.jsx)("button",{onClick:function(){y(!1)},children:"ADD NEW PRODUCT"}),!x&&Object(v.jsx)(A,{fields:null===(t=i.find((function(e){return e.name===r.product})))||void 0===t?void 0:t.fields,handleSubmit:function(e){p((function(t){return t&&Array.isArray(t)?[].concat(Object(l.a)(t),[e]):[e]})),y(!0)},children:Object(v.jsx)("button",{type:"submit",children:"Register"})}),f&&Array.isArray(f)&&Object(v.jsx)(A,{fields:null===(n=i.find((function(e){return e.name===r.customer})))||void 0===n?void 0:n.fields,handleSubmit:function(e){console.log(f,e)},children:Object(v.jsx)("button",{type:"submit",children:"Register"})})]}):null},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,309)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};u.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(E,{})}),document.getElementById("root")),I()}},[[302,1,2]]]);
//# sourceMappingURL=main.9640cc30.chunk.js.map